---
swagger: '2.0'

info:
    version: '0.1.0'
    title: Where's Charlie?
    
paths:
    /locations:
        get:
            description: List location updates.
            parameters:
                - name: per_page
                  in: query
                  description: The maximum number of entries returned. Default `10` max `200`.
                  type: integer
                  minimum: 1
                  maximum: 200
                  default: 10
                - name: page
                  in: query
                  description: The page to return. Default `0`.
                  type: integer
                  default: 0
                - name: reverseChronological
                  in: query
                  description: Return the results in reverse chronological order (newest first) if `true`. In chronological order if `false`. Default `true`.
                  type: boolean
                  default: true
                - name: show_hidden
                  in: query
                  description: Whether to show hidden location updates. Only available to administrators.
                  type: boolean
                  default: false
            responses:
                200:
                    description: The locations were retreived.
                    schema:
                        $ref: '#/definitions/ArrayOfLocations'
        post:
            description: Post a location update.
            parameters:
                - name: body
                  in: body
                  description: The `Location` object to be created.
                  required: true
                  schema:
                      $ref: '#/definitions/Location'
            responses:
                201:
                    description: The location update was created.
                    schema:
                        $ref: '#/definitions/Location'
        delete:
            description: Delete *all* location updates. **USE WITH CAUTION.**
            responses:
                204:
                    description: All location updates were deleted.
    /locations/{id}:
        get:
            description: Get a location update.
            parameters:
                - name: id
                  in: path
                  description: The `id` of the location update to retreive.
                  required: true
                  type: string
                  format: byte
            responses:
                200:
                    description: The location update was retreived.
                    schema:
                        $ref: '#/definitions/Location'
        delete:
            description: Delete a location update.
            parameters:
                - name: id
                  in: path
                  description: The `id` of the location update to delete.
                  required: true
                  type: string
                  format: byte
            responses:
                204:
                    description: The location update was deleted.
        patch:
            description: Update a location update. `location`, `dateTime`, and `hidden` can be updated by that user or admin. `userId` can be updated by admin.
            parameters:
                - name: id
                  in: path
                  description: The `id` of the location update to be patched.
                  required: true
                  type: string
                  format: byte
                - name: body
                  in: body
                  description: The partially-filled `Location` object used to patch.
                  required: true
                  schema:
                      $ref: '#/definitions/Location'
            responses:
                200:
                    description: The location update was patched.
                    schema:
                        $ref: '#/definitions/Location'
    /users:
        get:
            description: List users.
            parameters:
            - name: per_page
              in: query
              description: The maximum number of entries returned. Default `10` max `200`.
              type: integer
              minimum: 1
              maximum: 200
              default: 10
            - name: page
              in: query
              description: The page to return. Default `0`.
              type: integer
              default: 10
            - name: show_hidden
              in: query
              description: Whether to show hidden users. Only available to administrators. Default `false`; `true` is ignored if issued by a non-administrator.
              type: boolean
              default: false
            responses:
                200:
                    description: The users were retreived.
                    schema:
                        $ref: '#/definitions/ArrayOfUsers'
        post:
            description: Create a user.
            parameters:
            - name: body
              in: body
              description: The `User` object to be created.
              required: true
              schema:
                  $ref: '#/definitions/User'
            responses:
                201:
                    description: The user was created.
                    schema:
                        $ref: '#/definitions/User'
        delete:
            description: Delete *all* users. **USE WITH CAUTION.**
            responses:
                204:
                    description: All users were deleted.
    /users/{id}:
        get:
            description: Get a user.
            parameters:
            - name: id
              in: path
              description: The `id` of the user to retreive.
              required: true
              type: string
              format: byte
            responses:
                200:
                    description: The user was retreived.
                    schema:
                        $ref: '#/definitions/User'
        delete:
            description: Delete a user.
            parameters:
            - name: id
              in: path
              description: The `id` of the user to delete.
              required: true
              type: string
              format: byte
            responses:
                204:
                    description: The user was deleted.
        patch:
            description: Update a user. `name` and `hidden` can be updated by that user or an admin; `admin` can be updated by an admin.
            parameters:
                - name: id
                  in: path
                  description: The `id` of the user to update.
                  required: true
                  type: string
                  format: byte
                - name: body
                  in: body
                  description: The partially-filled `User` object used to patch.
                  required: true
                  schema:
                      $ref: '#/definitions/User'
            responses:
                200:
                    description: The user was patched.
                    schema:
                        $ref: '#/definitions/User'
    /users/{id}/locations:
        get:
            description: List a user's location updates.
            parameters:
                - name: id
                  in: path
                  description: The `id` of the user whose location updates are to be retreived.
                  required: true
                  type: string
                  format: byte
                - name: per_page
                  in: query
                  description: The maximum number of entries returned. Default `10` max `200`.
                  type: integer
                  minimum: 1
                  maximum: 200
                  default: 10
                - name: page
                  in: query
                  description: The page to return. Default `0`.
                  type: integer
                  default: 0
                - name: reverseChronological
                  in: query
                  description: Return the results in reverse chronological order (newest first) if `true`. In chronological order if `false`. Default `true`.
                  type: boolean
                  default: true
                - name: show_hidden
                  in: query
                  description: Whether to show hidden location updates. Only available to administrators.
                  type: boolean
                  default: false
            responses:
                200:
                    description: The locations were retreived.
                    schema:
                        $ref: '#/definitions/ArrayOfLocations'
    /users/{id}/locations/latest:
        get:
            description: Retreive a user's most recent location update.
            parameters:
            - name: id
              in: path
              description: The `id` of the user whose latest location update is to be retreived.
              required: true
              type: string
              format: byte
            responses:
                200:
                    description: The latest location update was retreived.
                    schema:
                        $ref: '#/definitions/Location'
            
definitions:
    Location:
        required:
            - locationString
        properties:
            id:
                type: string
                format: byte
            userId:
                type: string
                format: byte
            locationString:
                type: string
            dateTime:
                type: string
                format: date-time
            hidden:
                type: boolean
    User:
        required:
            - name
        properties:
            id:
                type: string
                format: byte
            name:
                type: string
            admin:
                type: boolean
            hidden:
                type: boolean
    ArrayOfLocations:
        type: array
        items:
            $ref: '#/definitions/Location'
    ArrayOfUsers:
        type: array
        items:
            $ref: '#/definitions/User'
